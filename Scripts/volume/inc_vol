#!/usr/bin/bash

declare -i vol=$(amixer get Master | tail -n 1 | awk '{print $4}' | sed 's|\[||;s|\%||;s|\]||')

sp0=ðŸ”ˆ
sp1=ðŸ”‰
sp2=ðŸ”Š
spmute=ðŸ”‡

toggle=$(amixer get Master | tail -n 1 | awk '{print $6}' | sed 's/\[//;s/\]//')

if [[ "$toggle" == "on" ]]
then
	if [[ $vol -le 50 ]]
	then
		if [[ $vol -le 5 ]]
		then
			icon=$sp0
		else
			icon=$sp1
		fi
	else
		icon=$sp2
	fi
else
	icon=$spmute
fi

amixer sset Master 5%+

kill -9 $(cat $HOME/github/dwm-bar/dwmpid)

notify-send "$icon $(amixer get Master | tail -n 1 | awk '{print $4}' | sed 's|\[||;s|\%||;s|\]||')% [$toggle]" -h string:x-canonical-private-synchronous:anything
